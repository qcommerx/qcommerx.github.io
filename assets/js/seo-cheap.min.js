const{createApp:createApp}=Vue;createApp({data:()=>({alert:{type:"",class:"",show:!1},website:"",auditing:"",result:[],metatags:[],formEnabled:!1,userData:{isAuth:!1,login:{}},profile:{show:!1,id:"",reports:""},modal:{show:!1,title:"",description:"",OK:"",cancel:""},dialog:{visible:!1,alert:{visible:!1,title:"",msg:"",action:"dialogAlert()"},info:{visible:!1,title:"",msg:"",action:"dialogInfo()"},warn:{visible:!1,title:"",msg:"",action:"dialogWarn()"}}}),methods:{handlePasswordCredential(t){var s=t.credential.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),e=decodeURIComponent(atob(s).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""));e=JSON.parse(e),axios.post("https://southamerica-east1-qcommerx-apis.cloudfunctions.net/mongo-post",{login:e}).then((t=>{this.userData.isAuth=!0,this.userData.login=t.data}))},logout(){google.accounts.id.disableAutoSelect(),"g_state"===document.cookie.split("=")[0]&&(document.cookie="g_state=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",this.userData.isAuth=!1)},qa(){axios.get("https://southamerica-east1-qcommerx-apis.cloudfunctions.net/mongo-post/").then((t=>{this.metatags=t.data}))},showProfile(){this.modal.title=this.userData.login.given_name.concat(" ").concat(this.userData.login.family_name),this.modal.description=this.userData.login.email,this.modal.show=!0,this.profile.reports=this.userData.login.my_reports,this.profile.id=this.userData.login._id,this.profile.show=!0},copyModalDescription(){navigator.clipboard.writeText(this.modal.description)},selectData(t){this.modal.title=t.name,this.modal.description=t.data,this.modal.show=!0,this.profile.show=!1,console.log(t)},testAlert(){this.showAlert("info","Houve um erro ao realizar consulta")},showAlert(t,s){const e=2e3;switch(this.alert.msg=s,this.alert.show=!0,t){case"error":this.alert.type=t,this.alert.class="snackbar show bg-red white",setTimeout((()=>{this.alert.class="snackbar",this.alert.show=!1}),e);break;case"warning":this.alert.type=t,this.alert.class="snackbar show bg-warning black",setTimeout((()=>{this.alert.class="snackbar",this.alert.show=!1}),e);break;case"success":this.alert.type=t,this.alert.class="snackbar show bg-green white",setTimeout((()=>{this.alert.class="snackbar",this.alert.show=!1}),e);break;default:this.alert.type=t,this.alert.class="snackbar show bg-info black",setTimeout((()=>{this.alert.class="snackbar",this.alert.show=!1}),e)}},startAudit(){axios.post("https://southamerica-east1-qcommerx-apis.cloudfunctions.net/siteAuditor20",{website:this.auditing}).then((t=>{this.result={};var s=[],e=[];console.log(t),Object.entries(t.data.result).forEach((([t,e])=>{s.push({name:t,data:e})})),Object.entries(t.data.stats.size).forEach((([t,s])=>{e.push({name:t,stats:s})}));var a=[];Object.entries(t.data.stats.missing).forEach((([t,s])=>{a.push({name:t,missing:s})}));for(var i=0;i<e.length;i++)for(var o=0;o<s.length;o++)e[i].name===s[o].name&&Object.assign(s[o],e[i]);this.result=s,this.website.image=t.data.result.ogimage,this.website.name=this.auditing,this.website.score=Math.round(100*t.data.score.status).toString().concat("%"),this.website.error=a,console.log(this.website.error),this.auditing=null,console.log(s),--this.userData.login.my_reports,200===t.status?this.showAlert("success","Data Received"):this.showAlert("error","Something got wrong"),0===this.userData.login.my_reports?this.formEnabled=!1:this.formEnabled=!0}))}}}).mount("#seocheap"),Vue.debug;